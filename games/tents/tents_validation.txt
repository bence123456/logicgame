map.setConsiderUnMutable(true);

if (map.twoNeighbouringSymbolsExists([S3])) {
    return false;
}

List(TileBase) treeTiles = map.getTilesWithGivenItem([S2]);
List(TileBase) tentTiles = map.getTilesWithGivenItem([S3]);

if (treeTiles.size() != tentTiles.size()) {
    return false;
}

for (TileBase treeTile : treeTiles) {
    if (!map.hasHorizontalOrVerticalNeighbourWithItem(treeTile, [S3])) {
        return false;
    }
}

for (TileBase tentTile : tentTiles) {
    if (!map.hasHorizontalOrVerticalNeighbourWithItem(tentTile, [S2])) {
        return false;
    }
}

return map.rightAndBottomHelperTilesAreValid([S3]);